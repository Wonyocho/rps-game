<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>âœŠâœŒï¸ğŸ– ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ âœŠâœŒï¸ğŸ–</title>
  <style>
    /* ì „ì²´ í™”ë©´ ì¤‘ì•™ ì •ë ¬ ë° íŒŒë€ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      background: #74b9ff;
      transition: background 0.5s ease;
      position: relative;
      overflow: hidden;
    }
    
    /* ê²Œì„ ì»¨í…Œì´ë„ˆ - í°ìƒ‰ ë°°ê²½ì— ë‘¥ê·¼ ëª¨ì„œë¦¬ */
    .container {
      background: #fff;
      padding: 25px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      max-width: 420px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }
    
    /* ì–¸ì–´ ì„ íƒê¸° - ìš°ì¸¡ ìƒë‹¨ì— ìœ„ì¹˜ */
    .language-selector {
      position: absolute;
      top: 15px;
      right: 15px;
      display: flex;
      align-items: center;
      gap: 5px;
      z-index: 10; /* ì—…ì  ë°°ë„ˆë³´ë‹¤ ìœ„ì— í‘œì‹œ */
    }
    
    /* ì–¸ì–´ ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .language-btn {
      background: #f0f0f0;
      border: none;
      border-radius: 8px;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.2s ease;
      font-weight: 500;
    }
    .language-btn:hover {
      background: #ddd;
    }
    .language-btn.active {
      background: #74b9ff;
      color: white;
    }
    .globe-icon {
      font-size: 16px;
      margin-right: 5px;
    }
    
    /* ì—…ì /ì¹­í˜¸ í‘œì‹œ ë°•ìŠ¤ - ìƒë‹¨ì— ìŠ¬ë¼ì´ë“œ ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜ */
    .achievement-box {
      width: calc(100% - 160px); /* ì–¸ì–´ ì„ íƒê¸° ê³µê°„ ë” ë§ì´ í™•ë³´ */
      background: #fcb69f;
      border-radius: 16px;
      margin-bottom: 20px;
      margin-right: 160px; /* ì–¸ì–´ ì„ íƒê¸°ì™€ ë” í™•ì‹¤íˆ ë¶„ë¦¬ */
      padding: 10px 12px; /* íŒ¨ë”©ì„ ë” ì¤„ì„ */
      text-align: center;
      font-size: 14px; /* í°íŠ¸ í¬ê¸° ë” ì¤„ì„ */
      font-weight: bold;
      color: #8b4513;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 2px solid #f39c12;
      display: none;
      animation: slideDown 0.5s ease-out;
      position: relative;
      z-index: 5;
    }
    .achievement-box.show {
      display: block;
    }
    .achievement-box.first-win {
      background: #a2d9a4;
      border-color: #28a745;
      color: #155724;
    }
    
    /* ì—…ì  ë°•ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* ì»´í“¨í„° ë¼ë²¨ */
    .computer-label {
      font-size: 16px;
      color: #444;
      font-weight: 500;
      margin-bottom: 8px;
      margin-top: 0;
      letter-spacing: 1.5px;
    }
    
    /* ì»´í“¨í„° ì„ íƒ í‘œì‹œ ë°•ìŠ¤ - í° ì´ëª¨ì§€ì™€ ê²°ê³¼ì— ë”°ë¥¸ ë°°ê²½ìƒ‰ ë³€ê²½ */
    .computer-box {
      width: 100%;
      background: #f1f2f6;
      border-radius: 16px;
      margin-bottom: 22px;
      min-height: 92px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 1px 3px rgba(0,0,0,0.03);
      font-size: 64px;
      font-weight: bold;
      position: relative;
      letter-spacing: 8px;
      transition: background 0.3s;
    }
    .computer-box.computer-win {
      background: #d0f0c0 !important;
    }
    .computer-box.computer-lose {
      background: #f8c8c8 !important;
    }
    .computer-box.computer-draw {
      background: #fff9c4 !important;
    }
    
    /* ê²Œì„ ì œëª© */
    h2 {
      text-align: center;
      margin-bottom: 16px;
      width: 100%;
      margin-top: 30px;
    }
    
    /* ì •ë³´ í‘œì‹œ ë°•ìŠ¤ (ê²°ê³¼, ìŠ¹ë¥ , í†µê³„) */
    .info-box {
      background: #f1f2f6;
      border-radius: 12px;
      padding: 14px 10px;
      text-align: center;
      margin-bottom: 12px;
      font-size: 17px;
      font-weight: 500;
      min-height: 32px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.03);
      width: 100%;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    /* ìŠ¹ë¥  ìƒ‰ìƒ - 50% ì´ìƒ ì´ˆë¡, ë¯¸ë§Œ ë¹¨ê°• */
    .info-box.win-rate-high {
      background: #d4edda !important;
      color: #155724;
    }
    .info-box.win-rate-low {
      background: #f8d7da !important;
      color: #721c24;
    }
    
    /* ì„ íƒ ë²„íŠ¼ë“¤ (ê°€ìœ„, ë°”ìœ„, ë³´) */
    .buttons {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: 16px;
      width: 100%;
    }
    .buttons button {
      flex: 1 1 30%;
      margin: 5px;
      padding: 14px 10px;
      border: none;
      border-radius: 12px;
      background: #f0f0f0;
      font-size: 24px;
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
    }
    .buttons button:hover:enabled {
      background: #ddd;
    }
    .buttons button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* ê²Œì„ ê²°ê³¼ì— ë”°ë¥¸ ë²„íŠ¼ ìƒ‰ìƒ */
    .buttons .win-button {
      background-color: #c8f7c5 !important;
    }
    .buttons .lose-button {
      background-color: #f7c5c5 !important;
    }
    .buttons .draw-button {
      background-color: #fff9c4 !important;
    }
    
    /* ê²°ê³¼ ë©”ì‹œì§€ ìƒ‰ìƒ */
    .win { background: #d4edda !important; color: #155724; }
    .lose { background: #f8d7da !important; color: #721c24; }
    .draw { background: #fff3cd !important; color: #856404; }
    
    /* ê²Œì„ ê¸°ë¡ í…Œì´ë¸” */
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fafafa;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border-bottom: 1px solid #e0e0e0;
    }
    th {
      background: #f2f2f2;
    }
    
    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ */
    @media (max-width: 500px) {
      .buttons button {
        flex: 1 1 100%;
      }
      .info-box, .computer-box {
        font-size: 15px;
        padding: 12px 4px;
      }
      .language-selector {
        position: static;
        margin-bottom: 15px;
        justify-content: center;
        z-index: 10;
      }
      .achievement-box {
        width: 100%; /* ëª¨ë°”ì¼ì—ì„œëŠ” ì „ì²´ í­ ì‚¬ìš© */
        margin-right: 0; /* ëª¨ë°”ì¼ì—ì„œëŠ” ì—¬ë°± ì œê±° */
        font-size: 13px; /* ëª¨ë°”ì¼ì—ì„œ í°íŠ¸ í¬ê¸° ë” ì‘ê²Œ */
        padding: 8px 10px; /* ëª¨ë°”ì¼ì—ì„œ íŒ¨ë”© ë” ì¤„ì„ */
      }
      h2 {
        margin-top: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ì–¸ì–´ ì„ íƒê¸° -->
    <div class="language-selector">
      <span class="globe-icon">ğŸŒ</span>
      <button class="language-btn active" onclick="setLanguage('ko')">KO</button>
      <button class="language-btn" onclick="setLanguage('en')">EN</button>
      <button class="language-btn" onclick="setLanguage('jp')">JP</button>
    </div>
    
    <!-- ì—…ì /ì¹­í˜¸ í‘œì‹œ ë°•ìŠ¤ -->
    <div id="achievement-box" class="achievement-box"></div>
    
    <!-- ê²Œì„ ì œëª© -->
    <h2 id="game-title">âœŠâœŒï¸ğŸ– ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ âœŠâœŒï¸ğŸ–</h2>
    
    <!-- ì»´í“¨í„° ì„ íƒ ì˜ì—­ -->
    <div class="computer-label" id="computer-label">COMPUTER</div>
    <div class="computer-box" id="computer-box">
      <span id="computer-emoji">âœŠ</span>
    </div>
    
    <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
    <div id="result" class="info-box">ğŸ‘‡ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
    
    <!-- í”Œë ˆì´ì–´ ì„ íƒ ë²„íŠ¼ë“¤ -->
    <div class="buttons">
      <button onclick="play('âœŒï¸', this)">âœŒï¸</button>
      <button onclick="play('âœŠ', this)">âœŠ</button>
      <button onclick="play('ğŸ–', this)">ğŸ–</button>
    </div>
    
    <!-- í†µê³„ í‘œì‹œ ì˜ì—­ -->
    <div id="win-rate" class="info-box">ìŠ¹ë¥ : 0%</div>
    <div id="stats" class="info-box">ìŠ¹: 0 / ë¬´: 0 / íŒ¨: 0</div>
    
    <!-- ê²Œì„ ê¸°ë¡ í…Œì´ë¸” -->
    <h4 id="history-title">ğŸ“œ ìµœê·¼ ê²°ê³¼ (ìµœëŒ€ 5ê°œ)</h4>
    <table>
      <thead>
        <tr>
          <th id="table-me">ë‚˜</th>
          <th id="table-computer">ì»´í“¨í„°</th>
          <th id="table-result">ê²°ê³¼</th>
        </tr>
      </thead>
      <tbody id="history-body"></tbody>
    </table>
  </div>

  <script>
    /* ==================== ì „ì—­ ë³€ìˆ˜ ë° ì„¤ì • ==================== */
    
    // ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒì§€ ë°°ì—´
    const choices = ['âœŠ', 'âœŒï¸', 'ğŸ–'];
    
    // í˜„ì¬ ì–¸ì–´ ì„¤ì •
    let currentLanguage = 'ko';
    
    // ê²Œì„ ìƒíƒœ ë³€ìˆ˜ë“¤
    let winStreak = 0; // ì—°ìŠ¹ ì¹´ìš´í„°
    let firstWin = false; // ì²« ìŠ¹ë¦¬ í™•ì¸
    let achievedStreaks = new Set(); // ì´ë¯¸ ë‹¬ì„±í•œ ì—°ìŠ¹ ê¸°ë¡ (ì¤‘ë³µ ë°©ì§€)
    
    /* ==================== ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„° ==================== */
    
    const translations = {
      ko: {
        gameTitle: 'âœŠâœŒï¸ğŸ– ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ âœŠâœŒï¸ğŸ–',
        computerLabel: 'COMPUTER',
        initialResult: 'ğŸ‘‡ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤',
        win: 'ìŠ¹ë¦¬!',
        draw: 'ë¬´ìŠ¹ë¶€',
        lose: 'íŒ¨ë°°...',
        winRate: 'ìŠ¹ë¥ ',
        wins: 'ìŠ¹',
        draws: 'ë¬´',
        losses: 'íŒ¨',
        historyTitle: 'ğŸ“œ ìµœê·¼ ê²°ê³¼ (ìµœëŒ€ 5ê°œ)',
        tableMe: 'ë‚˜',
        tableComputer: 'ì»´í“¨í„°',
        tableResult: 'ê²°ê³¼',
        achievements: {
          1: 'ğŸ‰ "ì²« ìŠ¹ë¦¬! ì‹œì‘ì´ ë°˜ì´ë‹¤!"',
          3: 'ğŸ”¥ "ìŠ¬ìŠ¬ ì†ë§›ì´â€¦"',
          5: 'ğŸ… "ê°€ìœ„ë°”ìœ„ë³´ ê³ ìˆ˜!"',
          10: 'ğŸ‘‘ "ì „ì„¤ì˜ ì£¼ë¨¹ì™•!"',
          15: 'ğŸ’ "ë¬´ì ì˜ ê°€ìœ„ë°”ìœ„ë³´ ì‹ !"',
          20: 'âš¡ "ì°¨ì›ì´ ë‹¤ë¥¸ ì‹¤ë ¥!"'
        },
        waitMessages: [
          'ì¸ê°„ì˜ ì‹¬ë¦¬ë¥¼ íŒŒì•…ì¤‘...',
          'ì‚¬ìš©ì íŒ¨í„´ í•™ìŠµì¤‘...',
          'ë¹„ì¥ì˜ ìˆ˜ë¥¼ ê³ ë¥´ëŠ”ì¤‘...',
          'AI í’€ê°€ë™ ì¤‘...',
          'GPTì—ê²Œ ì¡°ì–¸ì„ êµ¬í•˜ëŠ”ì¤‘...',
          'ì•ŒíŒŒê³ ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ëŠ”ì¤‘...'
        ]
      },
      en: {
        gameTitle: 'âœŠâœŒï¸ğŸ– Rock Paper Scissors âœŠâœŒï¸ğŸ–',
        computerLabel: 'COMPUTER',
        initialResult: 'ğŸ‘‡ Results will be displayed here',
        win: 'You Win!',
        draw: 'Draw',
        lose: 'You Lose...',
        winRate: 'Win Rate',
        wins: 'W',
        draws: 'D',
        losses: 'L',
        historyTitle: 'ğŸ“œ Recent Results (Max 5)',
        tableMe: 'You',
        tableComputer: 'Computer',
        tableResult: 'Result',
        achievements: {
          1: 'ğŸ‰ "First Victory! Great start!"',
          3: 'ğŸ”¥ "Getting the hang of it..."',
          5: 'ğŸ… "Rock Paper Scissors Master!"',
          10: 'ğŸ‘‘ "Legendary Champion!"',
          15: 'ğŸ’ "Invincible RPS God!"',
          20: 'âš¡ "Next Level Skills!"'
        },
        waitMessages: [
          'Analyzing human psychology...',
          'Learning user patterns...',
          'Choosing the secret move...',
          'AI at full power...',
          'Asking GPT for advice...',
          'Requesting help from AlphaGo...'
        ]
      },
      jp: {
        gameTitle: 'âœŠâœŒï¸ğŸ– ã˜ã‚ƒã‚“ã‘ã‚“ã‚²ãƒ¼ãƒ  âœŠâœŒï¸ğŸ–',
        computerLabel: 'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼',
        initialResult: 'ğŸ‘‡ çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™',
        win: 'å‹åˆ©ï¼',
        draw: 'ã‚ã„ã“',
        lose: 'è² ã‘...',
        winRate: 'å‹ç‡',
        wins: 'å‹',
        draws: 'åˆ†',
        losses: 'è² ',
        historyTitle: 'ğŸ“œ æœ€è¿‘ã®çµæœ (æœ€å¤§5ä»¶)',
        tableMe: 'ã‚ãªãŸ',
        tableComputer: 'ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼',
        tableResult: 'çµæœ',
        achievements: {
          1: 'ğŸ‰ "åˆå‹åˆ©ï¼å§‹ã¾ã‚Šã®ä¸€æ­©ï¼"',
          3: 'ğŸ”¥ "ã ã‚“ã ã‚“èª¿å­ãŒ..."',
          5: 'ğŸ… "ã˜ã‚ƒã‚“ã‘ã‚“ãƒã‚¹ã‚¿ãƒ¼!"',
          10: 'ğŸ‘‘ "ä¼èª¬ã®æ‹³ç‹!"',
          15: 'ğŸ’ "ç„¡æ•µã®ã˜ã‚ƒã‚“ã‘ã‚“ç¥!"',
          20: 'âš¡ "æ¬¡å…ƒã®é•ã†å®ŸåŠ›!"'
        },
        waitMessages: [
          'äººé–“ã®å¿ƒç†ã‚’åˆ†æä¸­...',
          'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ä¸­...',
          'å¿…æ®ºæŠ€ã‚’é¸æŠä¸­...',
          'AI ãƒ•ãƒ«ç¨¼åƒä¸­...',
          'GPTã«ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ±‚ã‚ä¸­...',
          'AlphaGoã«åŠ©ã‘ã‚’æ±‚ã‚ä¸­...'
        ]
      }
    };

    // ê²°ê³¼ í…ìŠ¤íŠ¸ ê°„ë‹¨ ë²„ì „ (íˆìŠ¤í† ë¦¬ìš©)
    const resultTexts = {
      ko: { win: "ìŠ¹ë¦¬!", draw: "ë¬´ìŠ¹ë¶€", lose: "íŒ¨ë°°..." },
      en: { win: "You Win!", draw: "Draw", lose: "You Lose..." },
      jp: { win: "å‹åˆ©ï¼", draw: "ã‚ã„ã“", lose: "è² ã‘..." }
    };

    /* ==================== ê²Œì„ ìƒíƒœ ë³€ìˆ˜ë“¤ ==================== */
    
    const history = []; // ê²Œì„ ê¸°ë¡ ë°°ì—´ (ìµœëŒ€ 5ê°œ)
    let totalGames = 0; // ì „ì²´ ê²Œì„ ìˆ˜ (ë¬´ìŠ¹ë¶€ ì œì™¸)
    let wins = 0; // ìŠ¹ë¦¬ íšŸìˆ˜
    let draws = 0; // ë¬´ìŠ¹ë¶€ íšŸìˆ˜
    let losses = 0; // íŒ¨ë°° íšŸìˆ˜
    let isPlaying = false; // í˜„ì¬ ê²Œì„ ì§„í–‰ ì¤‘ì¸ì§€ í™•ì¸
    let rotateTimer = null; // ì»´í“¨í„° ì´ëª¨ì§€ íšŒì „ íƒ€ì´ë¨¸
    let rotateIdx = 0; // í˜„ì¬ íšŒì „ ì¸ë±ìŠ¤

    /* ==================== ì—…ì /ì¹­í˜¸ ì‹œìŠ¤í…œ ==================== */
    
    /**
     * ì—…ì  ë‹¬ì„± ì‹œ ìƒë‹¨ì— ì¹­í˜¸ ë°•ìŠ¤ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
     * @param {number} streak - ì—°ìŠ¹ íšŸìˆ˜
     * @param {boolean} isFirstWin - ì²« ìŠ¹ë¦¬ ì—¬ë¶€ (íŠ¹ë³„í•œ ìŠ¤íƒ€ì¼ ì ìš©)
     */
    function showAchievement(streak, isFirstWin = false) {
      const achievements = translations[currentLanguage].achievements;
      if (achievements[streak]) {
        const achievementBox = document.getElementById('achievement-box');
        achievementBox.textContent = achievements[streak];
        
        // ì²« ìŠ¹ë¦¬ëŠ” ì´ˆë¡ìƒ‰ ìŠ¤íƒ€ì¼ ì ìš©
        if (isFirstWin) {
          achievementBox.classList.add('first-win');
        } else {
          achievementBox.classList.remove('first-win');
        }
        
        // ìŠ¬ë¼ì´ë“œ ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ í‘œì‹œ
        achievementBox.classList.add('show');
        
        // ì¼ì • ì‹œê°„ í›„ ìë™ìœ¼ë¡œ ìˆ¨ê¹€ (ì²« ìŠ¹ë¦¬ëŠ” ë” ì˜¤ë˜ í‘œì‹œ)
        setTimeout(() => {
          achievementBox.classList.remove('show');
          if (isFirstWin) {
            setTimeout(() => {
              achievementBox.classList.remove('first-win');
            }, 500);
          }
        }, isFirstWin ? 4000 : 3000);
      }
    }

    /* ==================== ë‹¤êµ­ì–´ ì‹œìŠ¤í…œ ==================== */
    
    /**
     * ì–¸ì–´ë¥¼ ë³€ê²½í•˜ê³  ëª¨ë“  UI í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
     * @param {string} lang - ì–¸ì–´ ì½”ë“œ ('ko', 'en', 'jp')
     */
    function setLanguage(lang) {
      currentLanguage = lang;
      
      // ì–¸ì–´ ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
      document.querySelectorAll('.language-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // UI í…ìŠ¤íŠ¸ë¥¼ ìƒˆë¡œìš´ ì–¸ì–´ë¡œ ì—…ë°ì´íŠ¸
      const t = translations[lang];
      document.getElementById('game-title').textContent = t.gameTitle;
      document.getElementById('computer-label').textContent = t.computerLabel;
      document.getElementById('result').textContent = t.initialResult;
      document.getElementById('history-title').textContent = t.historyTitle;
      document.getElementById('table-me').textContent = t.tableMe;
      document.getElementById('table-computer').textContent = t.tableComputer;
      document.getElementById('table-result').textContent = t.tableResult;
      
      // í†µê³„ì™€ íˆìŠ¤í† ë¦¬ë¥¼ ìƒˆë¡œìš´ ì–¸ì–´ë¡œ ì—…ë°ì´íŠ¸
      updateStats();
      updateHistory();
      
      // HTML ë¬¸ì„œì˜ ì–¸ì–´ ì†ì„±ë„ ë³€ê²½
      document.documentElement.lang = lang;
    }

    /* ==================== í†µê³„ ë° UI ì—…ë°ì´íŠ¸ ==================== */
    
    /**
     * ìŠ¹ë¥ ê³¼ ê²Œì„ í†µê³„ë¥¼ ê³„ì‚°í•˜ê³  í™”ë©´ì— ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
     * ìŠ¹ë¥  50% ì´ìƒ/ë¯¸ë§Œì— ë”°ë¼ ìƒ‰ìƒë„ ë³€ê²½
     */
    function updateStats() {
      const t = translations[currentLanguage];
      const winRate = totalGames === 0 ? 0 : ((wins / totalGames) * 100).toFixed(1);
      const winRateElement = document.getElementById('win-rate');
      
      // ìŠ¹ë¥  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
      winRateElement.textContent = `${t.winRate}: ${winRate}%`;
      
      // ìŠ¹ë¥ ì— ë”°ë¥¸ ìƒ‰ìƒ ë³€ê²½ (50% ê¸°ì¤€)
      winRateElement.classList.remove('win-rate-high', 'win-rate-low');
      if (totalGames > 0) {
        if (winRate >= 50) {
          winRateElement.classList.add('win-rate-high'); // ì´ˆë¡ìƒ‰
        } else {
          winRateElement.classList.add('win-rate-low'); // ë¹¨ê°„ìƒ‰
        }
      }
      
      // ìŠ¹/ë¬´/íŒ¨ í†µê³„ ì—…ë°ì´íŠ¸
      document.getElementById('stats').textContent = `${t.wins}: ${wins} / ${t.draws}: ${draws} / ${t.losses}: ${losses}`;
    }

    /* ==================== ì»´í“¨í„° ì´ëª¨ì§€ ì• ë‹ˆë©”ì´ì…˜ ==================== */
    
    /**
     * ì»´í“¨í„° ì„ íƒ ì´ëª¨ì§€ë¥¼ ê³„ì† íšŒì „ì‹œí‚¤ëŠ” í•¨ìˆ˜
     * ê²Œì„ ëŒ€ê¸° ì¤‘ì¼ ë•Œ ë™ì ì¸ íš¨ê³¼ë¥¼ ìœ„í•´ ì‚¬ìš©
     */
    function rotateComputerEmoji() {
      const emoji = document.getElementById('computer-emoji');
      rotateIdx = (rotateIdx + 1) % choices.length;
      emoji.textContent = choices[rotateIdx];
      rotateTimer = setTimeout(rotateComputerEmoji, 300); // 300msë§ˆë‹¤ ë³€ê²½
    }

    /**
     * ì»´í“¨í„° ì´ëª¨ì§€ íšŒì „ì„ ì¤‘ì§€í•˜ëŠ” í•¨ìˆ˜
     * ê²Œì„ ê²°ê³¼ê°€ ë‚˜ì™”ì„ ë•Œ í˜¸ì¶œ
     */
    function stopRotateComputerEmoji() {
      if (rotateTimer) {
        clearTimeout(rotateTimer);
        rotateTimer = null;
      }
    }

    /* ==================== ë©”ì¸ ê²Œì„ ë¡œì§ ==================== */
    
    /**
     * ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ì˜ í•µì‹¬ í•¨ìˆ˜
     * ì‚¬ìš©ì ì„ íƒì„ ë°›ì•„ ì»´í“¨í„°ì™€ ëŒ€ê²°í•˜ê³  ê²°ê³¼ë¥¼ ì²˜ë¦¬
     * @param {string} userChoice - ì‚¬ìš©ìê°€ ì„ íƒí•œ ê²ƒ ('âœŒï¸', 'âœŠ', 'ğŸ–')
     * @param {HTMLElement} btnElement - í´ë¦­ëœ ë²„íŠ¼ ìš”ì†Œ
     */
    function play(userChoice, btnElement) {
      // ì´ë¯¸ ê²Œì„ì´ ì§„í–‰ ì¤‘ì´ë©´ ì¤‘ë³µ ì‹¤í–‰ ë°©ì§€
      if (isPlaying) return;
      isPlaying = true;

      // UI ì´ˆê¸°í™”: ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™” ë° ìŠ¤íƒ€ì¼ ë¦¬ì…‹
      const buttons = document.querySelectorAll('.buttons button');
      const computerBox = document.getElementById('computer-box');
      
      buttons.forEach(btn => {
        btn.classList.remove('win-button', 'lose-button', 'draw-button');
        btn.disabled = true;
      });
      
      // ì»´í“¨í„° ë°•ìŠ¤ ë°°ê²½ìƒ‰ ì´ˆê¸°í™”
      computerBox.classList.remove('computer-win', 'computer-lose', 'computer-draw');

      // ëŒ€ê¸° ë©”ì‹œì§€ í‘œì‹œ ë‹¨ê³„
      const resultDiv = document.getElementById('result');
      const waitMessages = translations[currentLanguage].waitMessages;
      const msg = waitMessages[Math.floor(Math.random() * waitMessages.length)];
      resultDiv.textContent = msg;
      resultDiv.className = "info-box";

      // 1.5ì´ˆ í›„ ê²Œì„ ê²°ê³¼ ì²˜ë¦¬
      setTimeout(() => {
        // ì»´í“¨í„°ì˜ ëœë¤ ì„ íƒ
        const computerChoice = choices[Math.floor(Math.random() * 3)];
        
        // ì»´í“¨í„° ì´ëª¨ì§€ íšŒì „ ì¤‘ì§€ ë° ê²°ê³¼ í‘œì‹œ
        stopRotateComputerEmoji();
        document.getElementById('computer-emoji').textContent = computerChoice;
        
        // ê²Œì„ ê²°ê³¼ ê³„ì‚°ì„ ìœ„í•œ ë³€ìˆ˜ë“¤ ì´ˆê¸°í™”
        let resultText = '';
        let resultClass = '';
        let bodyBg = '';
        let computerBoxClass = '';
        let shortResult = '';

        // ==================== ê²Œì„ ê²°ê³¼ íŒì • ë¡œì§ ====================
        
        if (userChoice === computerChoice) {
          // ë¬´ìŠ¹ë¶€ì¸ ê²½ìš°
          shortResult = 'draw';
          resultText = resultTexts[currentLanguage].draw;
          resultClass = 'draw';
          bodyBg = '#fdcb6e'; // ì£¼í™©ìƒ‰ ë°°ê²½
          computerBoxClass = 'computer-draw';
          draws++;
          // ë¬´ìŠ¹ë¶€ëŠ” ì—°ìŠ¹ì„ ëŠì§€ ì•ŠìŒ (ì¤‘ìš”í•œ ê²Œì„ ë£°)
          btnElement.classList.add('draw-button');
          
        } else if (
          // ì‚¬ìš©ì ìŠ¹ë¦¬ ì¡°ê±´ë“¤
          (userChoice === 'âœŒï¸' && computerChoice === 'ğŸ–') || // ê°€ìœ„ê°€ ë³´ë¥¼ ì´ê¹€
          (userChoice === 'âœŠ' && computerChoice === 'âœŒï¸') || // ë°”ìœ„ê°€ ê°€ìœ„ë¥¼ ì´ê¹€
          (userChoice === 'ğŸ–' && computerChoice === 'âœŠ')    // ë³´ê°€ ë°”ìœ„ë¥¼ ì´ê¹€
        ) {
          // ì‚¬ìš©ì ìŠ¹ë¦¬ì¸ ê²½ìš°
          shortResult = 'win';
          resultText = resultTexts[currentLanguage].win;
          resultClass = 'win';
          bodyBg = '#00b894'; // ì´ˆë¡ìƒ‰ ë°°ê²½
          computerBoxClass = 'computer-lose';
          wins++;
          winStreak++; // ì—°ìŠ¹ ì¹´ìš´í„° ì¦ê°€
          btnElement.classList.add('win-button');
          
          // ==================== ì—…ì  ì‹œìŠ¤í…œ ì²˜ë¦¬ ====================
          
          // ì²« ìŠ¹ë¦¬ ì—…ì  í™•ì¸ (ì—°ìŠ¹ê³¼ ë³„ê°œë¡œ ì²˜ë¦¬)
          if (wins === 1 && !firstWin) {
            firstWin = true;
            setTimeout(() => showAchievement(1, true), 1000);
          }
          // ì—°ìŠ¹ ì—…ì  í™•ì¸ (ì¤‘ë³µ ë°©ì§€ë¥¼ ìœ„í•´ Set ì‚¬ìš©)
          else if ((winStreak === 3 || winStreak === 5 || winStreak === 10 || winStreak === 15 || winStreak === 20) 
                   && !achievedStreaks.has(winStreak)) {
            achievedStreaks.add(winStreak); // ë‹¬ì„±í•œ ì—°ìŠ¹ ê¸°ë¡ì— ì¶”ê°€
            setTimeout(() => showAchievement(winStreak), 1000);
          }
          
        } else {
          // ì‚¬ìš©ì íŒ¨ë°°ì¸ ê²½ìš°
          shortResult = 'lose';
          resultText = resultTexts[currentLanguage].lose;
          resultClass = 'lose';
          bodyBg = '#e17055'; // ë¹¨ê°„ìƒ‰ ë°°ê²½
          computerBoxClass = 'computer-win';
          losses++;
          winStreak = 0; // íŒ¨ë°° ì‹œ ì—°ìŠ¹ ì´ˆê¸°í™”
          achievedStreaks.clear(); // ë‹¬ì„±í•œ ì—°ìŠ¹ ê¸°ë¡ë„ ì´ˆê¸°í™”
          btnElement.classList.add('lose-button');
        }

        // ==================== ê²Œì„ í†µê³„ ë° UI ì—…ë°ì´íŠ¸ ====================
        
        // ë¬´ìŠ¹ë¶€ê°€ ì•„ë‹Œ ê²½ìš°ë§Œ ì „ì²´ ê²Œì„ ìˆ˜ì— í¬í•¨
        if (shortResult !== 'draw') totalGames++;
        
        // í†µê³„, ë°°ê²½ìƒ‰, ì»´í“¨í„° ë°•ìŠ¤ ì—…ë°ì´íŠ¸
        updateStats();
        document.body.style.background = bodyBg;
        computerBox.classList.add(computerBoxClass);

        // ê²°ê³¼ ë©”ì‹œì§€ í‘œì‹œ
        resultDiv.textContent = resultText;
        resultDiv.className = `info-box ${resultClass}`;

        // ê²Œì„ ê¸°ë¡ íˆìŠ¤í† ë¦¬ ì—…ë°ì´íŠ¸ (ìµœëŒ€ 5ê°œê¹Œì§€ ë³´ê´€)
        history.unshift({ user: userChoice, cpu: computerChoice, result: resultText });
        if (history.length > 5) history.pop();
        updateHistory();

        // ==================== ê²Œì„ ì¢…ë£Œ í›„ ì´ˆê¸°í™” ====================
        
        // 2ì´ˆ í›„ ëª¨ë“  ê²ƒì„ ì´ˆê¸° ìƒíƒœë¡œ ë³µêµ¬
        setTimeout(() => {
          // ì»´í“¨í„° ë°•ìŠ¤ ë°°ê²½ìƒ‰ ì´ˆê¸°í™”
          computerBox.classList.remove('computer-win', 'computer-lose', 'computer-draw');
          // ë°°ê²½ì„ ê¸°ë³¸ íŒŒë€ìƒ‰ìœ¼ë¡œ ë³µêµ¬
          document.body.style.background = '#74b9ff';
          // ì»´í“¨í„° ì´ëª¨ì§€ íšŒì „ ì¬ì‹œì‘ (í˜„ì¬ ì´ëª¨ì§€ì—ì„œ ì´ì–´ì„œ)
          rotateIdx = choices.indexOf(computerChoice);
          if (!rotateTimer) rotateComputerEmoji();
          // ëª¨ë“  ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
          buttons.forEach(btn => btn.disabled = false);
          // ê²Œì„ ìƒíƒœ í”Œë˜ê·¸ í•´ì œ
          isPlaying = false;
        }, 2000);
      }, 1500); // ëŒ€ê¸° ë©”ì‹œì§€ í‘œì‹œ í›„ 1.5ì´ˆ ëŒ€ê¸°
    }

    /* ==================== ê²Œì„ ê¸°ë¡ ê´€ë¦¬ ==================== */
    
    /**
     * ê²Œì„ íˆìŠ¤í† ë¦¬ í…Œì´ë¸”ì„ í˜„ì¬ ì–¸ì–´ì— ë§ê²Œ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
     * ìµœê·¼ 5ê°œì˜ ê²Œì„ ê²°ê³¼ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ í‘œì‹œ
     */
    function updateHistory() {
      const tbody = document.getElementById('history-body');
      tbody.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
      
      // ì €ì¥ëœ íˆìŠ¤í† ë¦¬ë¥¼ ìˆœíšŒí•˜ë©° í…Œì´ë¸” í–‰ ìƒì„±
      history.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${item.user}</td><td>${item.cpu}</td><td>${item.result}</td>`;
        tbody.appendChild(tr);
      });
    }

    /* ==================== ê²Œì„ ì´ˆê¸°í™” ==================== */
    
    /**
     * í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜
     * ì»´í“¨í„° ì´ëª¨ì§€ íšŒì „ ì• ë‹ˆë©”ì´ì…˜ì„ ì‹œì‘
     */
    window.onload = () => {
      if (!rotateTimer) rotateComputerEmoji();
    };
  </script>
</body>
</html>